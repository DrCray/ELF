<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Podcast Scramble: Mary Koffman</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background-color: #f4f7f6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 { text-align: center; color: #2c3e50; }
        h2 { border-bottom: 2px solid #3498db; padding-bottom: 5px; margin-top: 40px; color: #2980b9; }
        p.instructions { text-align: center; font-style: italic; color: #666; }

        .section { margin-bottom: 30px; }
        
        .dialog-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .line {
            padding: 12px 15px;
            border-radius: 8px;
            background-color: #fff;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
            position: relative;
        }

        .line:hover { border-color: #3498db; }

        /* Indicator for first item clicked */
        .selected {
            border-color: #f39c12 !important;
            box-shadow: 0 0 10px rgba(243, 156, 18, 0.5);
            transform: scale(1.02);
            z-index: 10;
        }

        /* Feedback Colors */
/* Feedback Colors - Subtle Shades */
.correct {
    background-color: #e6f4ea !important; /* Very light mint green */
    border-color: #c3e6cb !important;
}

.incorrect {
    background-color: #fce8e6 !important; /* Very light rose/pink */
    border-color: #f5c6cb !important;
}

        .speaker-label {
            font-weight: bold;
            display: block;
            font-size: 0.8em;
            text-transform: uppercase;
            margin-bottom: 4px;
            color: #7f8c8d;
        }
.submission-area {
    margin-top: 40px;
    padding: 20px;
    background: #fff;
    border-radius: 8px;
    text-align: center;
    border: 1px solid #ddd;
}
.input-group {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-bottom: 15px;
}
input {
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 200px;
}
button {
    padding: 10px 20px;
    cursor: pointer;
    background-color: #3498db;
    color: white;
    border: none;
    border-radius: 4px;
    font-weight: bold;
}
button:disabled {
    background-color: #bdc3c7;
    cursor: not-allowed;
}
.error-msg {
    color: #e74c3c;
    font-size: 0.9em;
    margin-top: 8px;
}
/* Hide the inputs and button when actually printing the PDF */
@media print {
    .submission-area, .instructions, .selected {
        display: none;
    }
}        
    </style>
</head>
<body>

    <h1>Podcast Scramble</h1>
    <p class="instructions">Criminal and Victim Call 911<br> 
    Click two lines to swap them. Green means correct position, Red means incorrect.</p>

    <div id="game-board"></div>

<hr>
<div class="submission-area">
    <div class="input-group">
        <input type="text" id="studentName" placeholder="Name" oninput="validateForm()">
        <input type="text" id="studentID" placeholder="ID" oninput="validateForm()">
    </div>
        <p id="msg" class="error-msg">Name and ID required for PDF print/save</p>
    <button id="printBtn" onclick="window.print()" disabled>Print/Save to PDF</button>

</div>



    <script>
const quizData = [
    {
        title: "Section 1",
        lines: [
            { s: "Host", t: "So picture this: Marsha's curled up on her couch, probably mid-binge-watch or flipping through a magazine, and suddenly—BAM—a huge crash echoes from the kitchen. That moment when your heart just jumps into your throat, you know what I mean?" },
            { s: "Guest", t: "Oh, my stomach dropped just hearing that! I can imagine how terrifying that must have felt for her. And the kitchen—it's always the spot with the back door .. You can practically feel her panic as she makes a run for the front door, just hoping she can get out before anything worse happens." },
            { s: "Host", t: "But she barely makes it a few steps before this guy—dressed head-to-toe in black—grabs her by the hair and slams her into the wall. Then, out comes the knife, and he demands her jewelry. That’s the kind of nightmare scenario you hope you never have to imagine." },
            { s: "Guest", t: "What gets me is how she managed to keep her head in that moment. I mean, instead of freezing or panicking, she comes up with this quick-thinking plan—leading him right upstairs, acting like she's just going to hand over the valuables. That takes some serious guts under pressure." },
            { s: "Host", t: "Here’s where it gets wild. Marsha isn’t just stalling—she’s got a gun hidden in her dresser. She tricks the guy into opening the wrong drawer, and right as he’s distracted, she grabs her gun from the middle one. Talk about turning the tables." },
            { s: "Guest", t: "Exactly! And when he hesitates after she tells him to get down, she fires a warning shot—right into the wall beside him. That’s not just for show; that’s her way of sending a crystal-clear message: she’s not backing down. The guy bolts straight for the bathroom and locks himself in." },

        ]
    },
    {
        title: "Section 2",
        lines: [
            { s: "Host", t: "He must’ve been terrified—hiding out in the bathtub, getting as low as he can while she’s literally shooting through the door. The power dynamic flips so fast, from him being in control to him being the one scared for his life." },
            { s: "Guest", t: "Both of them end up calling 911 at the same time. Marsha’s on the line saying she's got an intruder at gunpoint, and meanwhile, the guy’s panicking that a 'crazy woman' is shooting at him. Two totally different versions of the same chaos, all unfolding in real time." },        
            { s: "Host", t: "When the police finally show up, imagine the scene they walk into: Marsha, still holding everything together, and this guy probably trembling in the bathroom. And then they ask her that classic question—what was she thinking?" },
            { s: "Guest", t: "Her answer really stuck with me. She tells them, 'I was just worried that he wouldn't stop at taking my jewelry and would rape or murder me. I wasn't going down without a fight.' That kind of raw honesty, that survival instinct—it’s both heartbreaking and inspiring." },
            { s: "Host", t: "Yeah, and it makes you realize just how unpredictable people can be when they’re fighting for their lives. Marsha’s quick thinking totally changed the outcome of that night. It could’ve ended so differently." },
            { s: "Guest", t: "It also makes you wonder—how would any of us react, really, when pushed to the edge like that? Her story’s a reminder that fear can fuel courage in ways you wouldn’t expect." }
        ]
    }
];

let selectedElement = null;

// Function to shuffle indices so that no index matches its original position
function getDerangedIndices(length) {
    let indices = Array.from({length}, (_, i) => i);
    let scrambled = [...indices];
    
    // Fisher-Yates shuffle with a check
    do {
        for (let i = scrambled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [scrambled[i], scrambled[j]] = [scrambled[j], scrambled[i]];
        }
    } while (scrambled.some((val, idx) => val === idx));
    
    return scrambled;
}

function initGame() {
    const board = document.getElementById('game-board');
    board.innerHTML = ''; // Clear board for fresh start
    
    quizData.forEach((section, sectionIdx) => {
        const sectionDiv = document.createElement('div');
        sectionDiv.className = 'section';
        sectionDiv.innerHTML = `<h2>${section.title}</h2>`;
        
        const container = document.createElement('div');
        container.className = 'dialog-container';
        
        // Generate a derangement so every line starts in the wrong place
        const scrambledIndices = getDerangedIndices(section.lines.length);

        scrambledIndices.forEach((originalIdx) => {
            const lineData = section.lines[originalIdx];
            const lineEl = document.createElement('div');
            lineEl.className = 'line';
            lineEl.dataset.originalIndex = originalIdx;
            lineEl.dataset.sectionIndex = sectionIdx;
            lineEl.innerHTML = `<span class="speaker-label">${lineData.s}</span> <span class="text">${lineData.t}</span>`;
            
            lineEl.onclick = () => handleSelection(lineEl);
            container.appendChild(lineEl);
        });

        sectionDiv.appendChild(container);
        board.appendChild(sectionDiv);
        checkColors(container);
    });
}

function handleSelection(el) {
    if (!selectedElement) {
        selectedElement = el;
        el.classList.add('selected');
    } else {
        if (selectedElement === el) {
            el.classList.remove('selected');
            selectedElement = null;
            return;
        }

        if (selectedElement.dataset.sectionIndex === el.dataset.sectionIndex) {
            const parent = el.parentNode;
            const nextToEl = el.nextSibling;
            const nextToSelected = selectedElement.nextSibling;

            parent.insertBefore(el, nextToSelected);
            parent.insertBefore(selectedElement, nextToEl);
            
            checkColors(parent);
        }

        selectedElement.classList.remove('selected');
        selectedElement = null;
    }
}

function checkColors(container) {
    const lines = container.querySelectorAll('.line');
    lines.forEach((line, currentIndex) => {
        if (parseInt(line.dataset.originalIndex) === currentIndex) {
            line.classList.add('correct');
            line.classList.remove('incorrect');
        } else {
            line.classList.add('incorrect');
            line.classList.remove('correct');
        }
    });
}

initGame();



function validateForm() {
    const name = document.getElementById('studentName').value.trim();
    const id = document.getElementById('studentID').value.trim();
    const btn = document.getElementById('printBtn');
    const msg = document.getElementById('msg');

    if (name !== "" && id !== "") {
        btn.disabled = false;
        msg.style.visibility = "hidden";
    } else {
        btn.disabled = true;
        msg.style.visibility = "visible";
    }
}
    </script>
</body>
</html>
