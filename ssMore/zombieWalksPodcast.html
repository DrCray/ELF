<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zombie Walks</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet">
    <style>
        html {font-size:100%;}
        body{font-family:'Poppins',sans-serif;line-height:1.4;color:#1a1a1a;background:#f0f4f8;margin:0;padding:0}
        .header{padding:.8rem .8rem .8rem 1.8rem;font-weight:600;font-size:1.3rem;color:white;border-radius:3px;
                background:linear-gradient(135deg,#ff6b6b,#4ecdc4);box-shadow:0 3px 6px gray}
        .container{width:100%;max-width:35rem;margin:0 auto;padding:1.5rem 1rem;background:#F7EDF4;
                   border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.05);box-sizing:border-box}
        h2{font-size:2rem;color:#2c3e50;margin-bottom:1.3rem;font-weight:700;border-bottom:3px solid #ff6b6b;
           padding-bottom:.5rem;transition:color .3s}h2:hover{color:#FB6D6D}
        h3{font-size:1rem;color:#3CA29A;font-weight:600}
        p,ul{font-size:1rem;color:#4a4a4a;margin-bottom:.8rem}
        ul{padding-left:1rem;list-style:none}
        ol{padding-left:1rem;}
        ul>li{margin-bottom:.8rem;position:relative;padding-left:.8rem}
        ul>li:before{content:'‚Ä¢';color:#ff6b6b;position:absolute;left:0;top:.2rem}

        /*hangin indent*/
        li {
          padding-left:1rem; text-indent: -1rem;
        }
        /*end hangin indent*/

        a{color:#FF14BA;text-decoration:none;transition:color .3s}a:hover{color:#4ecdc4;text-decoration:underline}
        .section{border:thin solid #F6C1E6;background:#f9f9f9;padding:1rem;border-radius:8px;
                 margin-bottom:1.1rem;transition:transform .3s,box-shadow .3s;position:relative}
        .section:hover{transform:translateY(-5px);box-shadow:0 6px 12px rgba(0,0,0,.1)}
        .sectionTop{border:thin solid #F6C1E6;background:#f9f9f9;padding:1rem;border-radius:8px;margin-bottom:1.1rem}
        #sectionTemplate{display:none}
        .editor-panel{position:fixed;top:10px;right:10px;background:rgba(255,255,255,.97);padding:14px;
                      border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.15);z-index:9999;
                      font-family:'Poppins',sans-serif;font-size:.85rem;min-width:10rem;max-width:15rem;}
        .editor-panel input,.editor-panel button{width:100%;margin:6px 0;padding:8px 10px;
                      font-size:.85rem;border:1px solid #ddd;border-radius:6px}
        .editor-panel button{background:#ff6b6b;color:white;font-weight:600;cursor:pointer;
                            transition:background .3s}
        .editor-panel button:hover{background:#4ecdc4}
        .delBtn,.link-del{background:#ff6b6b;color:white;border:none;padding:2px 6px;
                          font-size:.65rem;cursor:pointer;border-radius:3px;margin-left:8px}
        .edit-spacer{height:1px;margin:8px 0;user-select:none;contenteditable:false}
        .editMode{display:block}


    #btnSave{
      background-color:blue; font-size:1rem;
    }


        /* AUDIO LINKS STYLING */
        #audioLinks {
            margin: 1.1rem 0;
            text-align: center;
        }
        #audioLinks > div:first-child {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        .audio-link-wrapper {
            display: flex;
            align-items: center;
            margin-bottom: 18px;
            position: relative;
        }

        .fake-player-bar {
            display: flex;
            align-items: center;
            background: #e8ecef;
            padding: 5px 7px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            flex: 0 0 60%;
            transition: background 0.2s, transform 0.2s;
        }

        .fake-player-bar:hover {
            background: #d8e2ec;
            transform: translateY(-3px);
        }

        .play-emoji {
            font-size: 28px;
            margin-right: 16px;
            flex-shrink: 0;
        }

        .progress-track {
            flex: 1;
            height: 7px;
            background: #bbb;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 20%;
            background: #ff9500; /* matches orange ‚ñ∂Ô∏è */
        }

        .audio-label {
            margin-left: 18px;
            font-weight: 600;
            font-size: 1.05rem;
            color: #2c3e50;
        }

        .audio-del {
            position: absolute;
            right: -30px;
            background: #6a5acd;
            color: white;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            font-size: 14px;
            cursor: pointer;
            /* No display: none or block here ‚Äî let .editMode control it globally */
        }
    </style>
</head>

<body>
    <!-- EDITOR PANEL -->
    <div class="editor-panel editMode" style="display: none;">
        <div style="margin-bottom:1.2rem;"><strong>Editor Tools</strong></div>
        <hr>
        <label style="display: inline; cursor: pointer;"><b>Unordered List</b>
            <br>Use ^^ for delimiter
            <br>
            <input type="checkbox" id="olCheckbox" style="display: inline-block; vertical-align: middle; margin: 0 4px 0 0; width: auto; height: auto;">Change to Ordered List
        </label>
        <button id="formatBtn">Make List</button>

        <hr>


        <label>Display Text
            <br>
            <input id="linkText" placeholder="e.g. Watch on YouTube">
        </label>
        <label>URL
            <br>
            <input id="linkUrl" placeholder="e.g. https://youtu.be/...">
        </label>

        <button id="btnAddLink">+ Add Link</button>
        <button id="btnAddAudioLink">+ Add Podcast Player w/Link</button>
        <hr>

        <hr>
        <button id="btnAdd">+ Add Section</button>
        <hr>
        <label>Save As
            <br>
            <input id="filenameInput" value="myPodcastPage.html">
        </label>
        <button id="btnSave">Save to Local File</button>
    </div>
    <div class="container">
        <div class="header">Dr. Ray's English Lessons</div>
        <br>
        <div class="sectionTop">
            <h2 id="articleTitle" style="color:#3CA29A;">Zombie Walks - Podcast</h2>
            <p>A global phenemenan</p>
                        <a href="https://drcray.github.io/ELF/ssMore/zombieWalksArticle.html" target="_blank">üìñ&nbsp;<span style="color:#0D6B92;">Read the Article</span></a>
            <div id="linksSection" style="text-align:right;width:100%">
                <a href="https://drcray.github.io/ELF/ssMore/zombieWalksVocabStudyGuide.html" target="_blank" style="font-size: 90%; display: block; text-align: right;">Vocab Study Guide üìö</a>
                <button class="link-del editMode" style="margin-left: 8px; font-size: 0.7rem; display: none;">X</button><a href="https://drcray.github.io/ELF/ssMore/zombieWalksCloze.html" target="_blank" style="font-size: 90%; display: block; text-align: right;">Cloze/Select Quiz üìù</a>
                <button class="link-del editMode" style="margin-left: 8px; font-size: 0.7rem; display: none;">X</button><a href="https://drcray.github.io/ELF/ssMore/zombieWalksVocabQuiz.html" target="_blank" style="font-size: 90%; display: block; text-align: right;">Vocab Sentences Quiz üìù</a>
                <button class="link-del editMode" style="margin-left: 8px; font-size: 0.7rem; display: none;">X</button>
            </div>
        </div>
        <br>
        <!-- AUDIO BLOCK -->
        <div id="audioLinks">
            
            <div class="audio-link-wrapper">
                <button class="audio-del editMode" style="display: none;">X</button>
                <a href="https://youtu.be/NgR6SJhszSg" target="_blank" style="display: flex; width: 100%; text-decoration: none; color: inherit;">
                    <div class="fake-player-bar">
                        <div class="play-emoji">‚ñ∂Ô∏è</div>
                        <div class="progress-track">
                            <div class="progress-fill"></div>
                        </div>
                    </div>
                    <div class="audio-label">Podcast</div>
                </a>
            </div>
        </div>




        <!-- TEMPLATE -->
        <div id="sectionTemplate">
            <h3>New Section</h3>
            <div> [Type or past text here] </div>
            <button class="delBtn editMode" onclick="this.parentElement.remove()" style="display: none;">delete section</button>
        </div>


        <!-- SECTION 1 -->
        <div class="section">
            <h3>Zombie Walks - Podcast</h3>
            <div>
                <ul>
                    <li>Host: If you‚Äôve ever stumbled on a city street and seen a crowd of people shuffling around in ragged clothes with fake wounds, you‚Äôve probably witnessed a zombie walk‚Äîand honestly, it‚Äôs hard not to stop and watch! These events always
                        look like pure chaos but are actually super organized.&nbsp;&nbsp;</li>
                    <li>Guest: They really are! What surprises me most is just how much heart goes into them. Despite the gory appearances, zombie walks are more about creativity and community than scaring people. Some even double as charity events, which
                        is wild when you think about the whole 'undead' theme.&nbsp;&nbsp;</li>
                    <li>Host: Totally, I love that twist. The first time I heard about zombie walks, I pictured a bunch of friends just goofing off. But when you dig in, there‚Äôs this whole network of artists, horror fans, and even families getting involved.
                        And it‚Äôs not just in the U.S.‚Äîit‚Äôs a global thing now.&nbsp;&nbsp;</li>
                    <li>Guest: Oh absolutely, and the way these walks have evolved since that first one in Sacramento back in 2001 is honestly impressive. Now they‚Äôre massive, with dedicated organizers, city permits, and even sponsors in some places. It‚Äôs
                        kind of amazing how a small film festival promo turned into a worldwide tradition.&nbsp;&nbsp;</li>
                    <li>Host: Thinking about how each country puts its own spin on zombie walks makes me wish I could travel just to see the differences! Like, North America is all about record-breaking hordes and those crazy zombie pub crawls‚Äîimagine seeing
                        a bar packed with zombies ordering drinks.&nbsp;&nbsp;</li>
                    <li>Guest: That image cracks me up! But then you look at Europe, and it‚Äôs a whole different vibe‚Äîzombie walks are tied to big art and film festivals. There‚Äôs this cool scene in Spain at the Sitges festival, where the whole thing feels
                        like a living, breathing horror movie set. And in London, zombies are marching for charity, which is just the best contradiction.&nbsp;&nbsp;</li>
                    <li>Host: It‚Äôs so cool‚Äîone city‚Äôs party is another‚Äôs social action. And Latin America, wow, they take the makeup and theatrics to the next level. I read that in Mexico City, people spend hours on details‚Äîthink fake rotting skin, elaborate
                        costumes, the works. Suddenly, being a zombie is a full-on performance art.&nbsp;&nbsp;</li>
                    <li>Guest: What gets me, though, is how these walks can draw families and tourists. The carnival atmosphere in some places makes it less about horror and more about having fun together. It‚Äôs like, anyone can be a zombie for a day‚Äîno experience
                        required!&nbsp;&nbsp;</li>
                    <li>Host: That actually reminds me‚Äîhave you ever tried doing special effects makeup? Even putting on a little fake blood is way harder than it looks. These folks must have serious skills.</li>
                    <li>Host: So, what do you think draws people in? Is it the costumes, the sense of community, or just the chance to break out of the daily grind for a bit? Because I totally get the appeal of becoming someone‚Äîor something‚Äîelse for a night.&nbsp;&nbsp;</li>
                    <li>Guest: Honestly, for a lot of folks, it‚Äôs the creative challenge. There‚Äôs something fun about turning a pile of old clothes and a bit of corn syrup into a convincing zombie look. And then there‚Äôs the social side‚Äîgetting to be part
                        of this big, weird, supportive crowd where everyone‚Äôs in on the joke.&nbsp;&nbsp;</li>
                    <li>Host: Yeah, and it‚Äôs more than just fun for some people. The charity angle is super underrated; bringing canned goods or raising money while dressed as a monster is such a clever way to help out. It kind of flips the scary zombie trope
                        on its head.&nbsp;&nbsp;</li>
                    <li>Guest: For sure! I‚Äôve even heard of people making their own fake blood at home with corn syrup and food coloring. There‚Äôs this DIY spirit that runs through the whole thing. Plus, you get to meet people you‚Äôd never cross paths with
                        otherwise‚Äîteachers, artists, even parents with their kids all in zombie mode.&nbsp;&nbsp;</li>
                    <li>Host: And as these walks get bigger and more organized, it's bound to become even more popular.</li>
                    <li>Host: If you‚Äôre thinking about jumping in for your first zombie walk, there‚Äôs definitely a learning curve. You want to look creepy but also stay comfy‚Äînobody tells you how sweaty it gets under all that makeup and fake blood.&nbsp;&nbsp;</li>
                    <li>Guest: Oh, absolutely‚Äîlayers of latex and face paint sound cool until you‚Äôre halfway through and desperate for water! One trick I learned is to use old, oversized clothes so you can move easily, and to bring a water bottle. Wet wipes
                        are a lifesaver for the aftermath, believe me.&nbsp;&nbsp;</li>
                    <li>Host: And don‚Äôt underestimate good shoes! You could be wearing them for hours, especially when joining the after march pub crawl. Comfort really is key, even when you‚Äôre trying to look half-dead.&nbsp;&nbsp;</li>
                    <li>Guest: What‚Äôs kind of amazing is seeing everyone‚Äôs different takes. Some folks go minimalist‚Äîjust a little pale makeup and a torn shirt‚Äîwhile others go full Hollywood with prosthetics and fake wounds that look disturbingly real. There‚Äôs
                        no wrong way to do it, as long as you‚Äôre having fun.&nbsp;&nbsp;</li>
                    <li>Host: Makes me want to put together a costume with friends and give it a try. Who knows‚Äîmaybe next year we‚Äôll be out there, shuffling along with the rest of the horde!</li>
                </ul>
                <br>&nbsp;&nbsp;</div>
            <button class="delBtn editMode" onclick="this.parentElement.remove()" style="display: none;">delete section</button>
        </div>
        <div class="edit-spacer editMode" style="display: none;"></div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

          const $ = s => document.querySelector(s);
          const linkText = $('#linkText');
          const linkUrl = $('#linkUrl');
          //const audioIn = $('#audioInput');
          const fileIn = $('#filenameInput');
          const linksSec = $('#linksSection');
          const audioLinksSec = $('#audioLinks');
          const container = $('.container');


        // TOP-RIGHT LINKS DELETE (delegation)
        linksSec.addEventListener('click', (e) => {
          if (e.target.classList.contains('link-del')) {
            e.target.previousElementSibling.remove(); // remove the <a>
            e.target.remove();                        // remove the X button
          }
        });


          audioLinksSec.addEventListener('click', (e) => {
          if (e.target.classList.contains('audio-del')) {
            e.target.parentElement.remove();
          }
        });

         // ADD REGULAR LINK (top right)
          // ADD REGULAR LINK - now uses delegation
          $('#btnAddLink').onclick = () => {
            const text = linkText.value.trim();
            const url = linkUrl.value.trim();
            if (!text || !url) return alert('Fill both fields');

            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.textContent = text;
            link.style = 'font-size:85%; display:block; text-align:right;';

            const del = document.createElement('button');
            del.textContent = 'X';
            del.className = 'link-del editMode';
            del.style = 'margin-left:8px; font-size:0.7rem;';
            // NO onclick here ‚Äî handled by delegation below

            linksSec.appendChild(link);
            linksSec.appendChild(del);

            linkText.focus();
          };

           // ADD AUDIO LINK - now uses delegation
          $('#btnAddAudioLink').onclick = () => {
            const text = linkText.value.trim();
            const url = linkUrl.value.trim();
            if (!text || !url) return alert('Fill both fields');

            const wrapper = document.createElement('div');
            wrapper.className = 'audio-link-wrapper';

            const del = document.createElement('button');
            del.textContent = 'X';
            del.className = 'audio-del editMode';
            // NO onclick here

            const a = document.createElement('a');
            a.href = url;
            a.target = '_blank';
            a.style = 'display:flex; width:100%; text-decoration:none; color:inherit;';

            const bar = document.createElement('div');
            bar.className = 'fake-player-bar';

            const emoji = document.createElement('div');
            emoji.className = 'play-emoji';
            emoji.textContent = '‚ñ∂Ô∏è';

            const track = document.createElement('div');
            track.className = 'progress-track';
            const fill = document.createElement('div');
            fill.className = 'progress-fill';
            track.appendChild(fill);

            bar.appendChild(emoji);
            bar.appendChild(track);

            const label = document.createElement('div');
            label.className = 'audio-label';
            label.textContent = text;

            a.appendChild(bar);
            a.appendChild(label);

            wrapper.appendChild(del);
            wrapper.appendChild(a);

            audioLinksSec.appendChild(wrapper);

            linkText.focus();
          };



          // ADD SECTION (FIXED: add editMode to delBtn and spacer)
          $('#btnAdd').onclick = () => {
            const clone = $('#sectionTemplate').cloneNode(true);
            clone.removeAttribute('id');
            clone.style.display = 'block';
            clone.className = 'section';
            clone.contentEditable = 'true';

            const delBtn = clone.querySelector('.delBtn');
            delBtn.classList.add('editMode');
            delBtn.onclick = () => clone.remove();

            container.appendChild(clone);

            const sp = document.createElement('div');
            sp.className = 'edit-spacer editMode';
            sp.contentEditable = 'false';
            container.appendChild(sp);
          };

          // SAVE (WORKS: hides only editMode, restores, saves clean)
        $('#btnSave').onclick = () => {
          // 1. Update <title>
          const h2 = document.getElementById('articleTitle');
          const title = document.querySelector('title');
          if (h2 && title) title.textContent = h2.textContent.trim();


          // 3. HIDE editMode elements
          const editElements = document.querySelectorAll('.editMode');
          editElements.forEach(el => el.style.display = 'none');

          // 4. DISABLE contenteditable
          const editableEls = document.querySelectorAll('[contenteditable]');
          const wasEditable = [];
          editableEls.forEach(el => {
            wasEditable.push(el);
            el.removeAttribute('contenteditable');
          });

          // 5. Capture clean HTML
          const cleanHTML = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;

          // 6. RESTORE contenteditable
          wasEditable.forEach(el => el.setAttribute('contenteditable', 'true'));

          // 7. RESTORE visibility
          editElements.forEach(el => el.style.display = 'block');

          // 8. Download
          const blob = new Blob([cleanHTML], { type: 'text/html' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = fileIn.value.trim() || 'podcast.html';
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
        title.textContent="webpageMaker";

          // 9. Alert and confirm save editable version
        let saveEditableVersion = confirm("Saved to default download folder.\nSave an editable version?");

        if (!saveEditableVersion) return;  // Exit function if Cancel

          // === 10. SAVE EDITABLE VERSION ===
        const editHTML = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
        const editBlob = new Blob([editHTML], { type: 'text/html' });
        const editUrl = URL.createObjectURL(editBlob);
        const editA = document.createElement('a');
        const baseName = fileIn.value.trim() || 'podcast.html';
        const editName = baseName.replace(/\.html$/, '') + 'EditMode.html';
        editA.href = editUrl;
        editA.download = editName;
        document.body.appendChild(editA);
        editA.click();
        document.body.removeChild(editA);
        URL.revokeObjectURL(editUrl);
        title.textContent="webpageMaker";
        };

          // Enter = Add Link
          linkText.onkeypress = linkUrl.onkeypress = e => {
            if (e.key === 'Enter') $('#btnAddLink').click();
          };


        });


        //Code for Making Lists
        document.getElementById('formatBtn').addEventListener('click', function() {
            const selection = window.getSelection();

            if (!selection.rangeCount || selection.toString().trim() === '') {
                alert('Please select some text first');
                return;
            }

            // Check if OL is selected
            const useOL = document.getElementById('olCheckbox').checked;
            const listTag = useOL ? 'ol' : 'ul';

            // Get the range and extract the contents (preserves formatting)
            const range = selection.getRangeAt(0);
            const selectedFragment = range.cloneContents();

            // Create a temporary container to work with the HTML
            const tempDiv = document.createElement('div');
            tempDiv.appendChild(selectedFragment);

            // Get the HTML with formatting preserved
            let selectedHTML = tempDiv.innerHTML.trim();

            // Remove all <br> tags (including <br/> and <br />)
            selectedHTML = selectedHTML.replace(/<br\s*\/?>/gi, '');

            // Remove leading ^^ (checking both plain and within tags)
            selectedHTML = selectedHTML.replace(/^\^\^/, '').trim();

            // Remove trailing ^^
            selectedHTML = selectedHTML.replace(/\^\^$/, '').trim();

            // Create the list structure with the chosen list type
            let newTextList = '<' + listTag + '><li>' + selectedHTML + '</li></' + listTag + '>';

            // Replace ^^ with list item breaks
            let finalTextList = newTextList.replace(/\^\^/g, '</li><li>');

            // Remove whitespace after <li> and before </li>
            finalTextList = finalTextList.replace(/<li>\s+/g, '<li>');
            finalTextList = finalTextList.replace(/\s+<\/li>/g, '</li>');

            // Replace the selected text with the formatted list
            range.deleteContents();

            const newTempDiv = document.createElement('div');
            newTempDiv.innerHTML = finalTextList;
            const fragment = document.createDocumentFragment();
            while (newTempDiv.firstChild) {
                fragment.appendChild(newTempDiv.firstChild);
            }

            range.insertNode(fragment);

        });
    </script>





</body></html>
