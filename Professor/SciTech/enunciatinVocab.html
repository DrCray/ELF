<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enunciation and Articulation Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&amp;display=swap" rel="stylesheet">
  <style>
    body{font-family:'Poppins',sans-serif;line-height:1.4;color:#1a1a1a;background:#f0f4f8;margin:0;padding:0}
    .header{padding:.8rem .8rem .8rem 1.8rem;font-weight:600;font-size:1.3rem;color:white;border-radius:3px;
            background:linear-gradient(135deg,#ff6b6b,#4ecdc4);box-shadow:0 3px 6px gray}
    .container{width:100%;max-width:35rem;margin:0 auto;padding:1.5rem 1rem;background:#F7EDF4;
               border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.05);box-sizing:border-box}
    h2{font-size:2rem;color:#2c3e50;margin-bottom:1.3rem;font-weight:700;border-bottom:3px solid #ff6b6b;
       padding-bottom:.5rem;transition:color .3s}h2:hover{color:#FB6D6D}
    h3{font-size:1rem;color:#52C2B9;font-weight:600}
    p,ul{font-size:.8rem;color:#4a4a4a;margin-bottom:.8rem}
    ul{padding-left:1rem;list-style:none}
    ol{padding-left:1rem;}
    ul>li{margin-bottom:.8rem;position:relative;padding-left:.8rem}
    ul>li:before{content:'â€¢';color:#ff6b6b;position:absolute;left:0;top:.2rem}
    audio{width:100%;margin:1.2rem 0;border-radius:8px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.1))}
    a{color:#ff6b6b;text-decoration:none;transition:color .3s}a:hover{color:#4ecdc4;text-decoration:underline}
    .section{border:thin solid #F6C1E6;background:#f9f9f9;padding:1rem;border-radius:8px;
             margin-bottom:1.1rem;transition:transform .3s,box-shadow .3s;position:relative}
    .section:hover{transform:translateY(-5px);box-shadow:0 6px 12px rgba(0,0,0,.1)}
    .sectionTop{border:thin solid #F6C1E6;background:#f9f9f9;padding:1rem;border-radius:8px;margin-bottom:1.1rem}
    #sectionTemplate{display:none}
    .editor-panel{position:fixed;top:10px;right:10px;background:rgba(255,255,255,.97);padding:14px;
                  border-radius:12px;box-shadow:0 4px 20px rgba(0,0,0,.15);z-index:9999;
                  font-family:'Poppins',sans-serif;font-size:.85rem;min-width:10rem;max-width:15rem;}
    .editor-panel input,.editor-panel button{width:100%;margin:6px 0;padding:8px 10px;
                  font-size:.85rem;border:1px solid #ddd;border-radius:6px}
    .editor-panel button{background:#ff6b6b;color:white;font-weight:600;cursor:pointer;
                        transition:background .3s}
    .editor-panel button:hover{background:#4ecdc4}
    .delBtn,.link-del{background:#ff6b6b;color:white;border:none;padding:2px 6px;
                      font-size:.65rem;cursor:pointer;border-radius:3px;margin-left:8px}
    .edit-spacer{height:1px;margin:8px 0;user-select:none;contenteditable:false}
    .editMode{display:block}
  </style>
</head>
<body>
  <!-- EDITOR PANEL -->
  <div class="editor-panel editMode" style="display: none;">
    <strong>Editor Tools</strong>
    <hr style="margin:8px 0;border:none;border-top:1px solid #eee">
    <label>Display Text<br><input id="linkText" placeholder="e.g. Watch on YouTube"></label>
    <label>URL<br><input id="linkUrl" placeholder="e.g. https://youtu.be/..."></label>
    <button id="btnAddLink">+ Add Link</button>
    <label>Audio File<br><input id="audioInput" placeholder="podcast.webm"></label>
    <button id="btnRestoreAudio">+ Restore Audio</button>
    <label>Save As<br><input id="filenameInput" value="myPodcastPage.html"></label>
    <button id="btnSave">Save as Local File</button>
    <button id="btnAdd">+ Add Section</button>
  </div>
  <div class="container">
    <div class="header">Dr. Ray's English Lessons</div><br>
    <div class="sectionTop">
      <h2 id="articleTitle" style="color:#52C2B9;">Enunciation and Articulation Practice</h2><div id="linksSection" style="text-align:right;width:100%"></div>
    </div><br>
    <!-- AUDIO BLOCK -->
    <br>
    <!-- TEMPLATE -->
    <div id="sectionTemplate">
      <h3>New Section</h3>
      <ul>
        <li><p><strong>Host</strong>: Edit this...</p></li>
        <li><p><strong>Guest</strong>: Edit this...</p></li>
      </ul>
      <ol>
        <li><p><strong>Host</strong>: So, have you ever given someone a thumbs up...</p></li>
      </ol>
      <p>[plain text here]</p>
      <button class="delBtn editMode" onclick="this.parentElement.remove()" style="display: none;">delete</button>
    </div>
    <!-- SECTION 1 -->
    <div class="section">
      <h3>Enunciation and Articulation practice</h3>
      <ul><li><p>innovate</p></li><li><p>innovative</p></li><li><p>contemplate</p></li><li><p>contemporary</p></li><li><p>eliminate</p></li><li><p>elimination</p></li><li><p>evaluate</p></li><li><p>evaluation</p></li><li><p>identify</p></li><li><p>identification</p></li><li><p>analysis</p></li><li><p>analyze</p></li><li><p>analytical</p></li><li><p>economy</p></li><li><p>economical</p></li><li><p>example</p></li><li><p>exemplify</p></li><li><p>fluctuate</p></li><li><p>fluctuation</p></li><li><p>contribute</p></li><li><p>contribution</p></li><li><p>administer</p></li><li><p>administration</p></li><li><p>experiment</p></li><li><p>experimental</p></li><li><p>characterize</p></li><li><p>characteristic</p></li><li><p>deteriorate</p></li><li><p>deterioration</p></li><li><p>intimidate</p></li><li><p>intimate</p></li><li><p>facilitate</p></li><li><p>facilitator</p></li><li><p>subsidized</p></li><li><p>subsidiary</p></li><li><p>contemporary</p></li><li><p>contemporaneous</p></li><li><p>arbitrary</p></li><li><p>arbitration</p></li><li><p>ambiguity</p></li><li><p>ambiguous</p></li><li><p>validity&nbsp; &nbsp; &nbsp;</p></li><li><p>validate</p></li><li><p>determine</p></li><li><p>phenomena</p></li><li><p>inherent</p></li><li><p>simultaneous</p></li><li><p>idiosyncrasy</p></li><li><p>&nbsp;meticulous</p></li><li><p>&nbsp;capacity</p></li><li><p>dilemma&nbsp; &nbsp; &nbsp;</p></li><li><p>legitimate</p></li><li><p>manipulate</p></li><li><p>perpetuate</p></li><li><p>capacity</p></li><li><p>complexity</p></li><li><p>consecutive</p></li><li><p>correlation</p></li><li><p>cumulative</p></li><li><p>derivative</p></li><li><p>deteriorate</p></li><li><p>diminish</p></li><li><p>equivocal</p></li><li><p>eradicate</p></li><li><p>facilitate</p></li><li><p>formidable</p></li><li><p>illuminate</p></li><li><p>implication</p></li><li><p>inadequate</p></li><li><p>inevitable</p></li><li><p>inherently</p></li><li><p>initiate</p></li><li><p>intensify</p></li><li><p>intricate</p></li><li><p>legitimate</p></li><li><p>manipulate</p></li><li><p>meticulous</p></li><li><p>negotiate</p></li><li><p>perpetuate</p></li><li><p>preliminary</p></li><li><p>predominant</p></li></ul>

<ul><li><p><style type="text/css">p { line-height: 115%; margin-bottom: 0.1in; background: transparent }</style></p><ol></ol><p></p></li></ul><button class="delBtn editMode" onclick="this.parentElement.remove()" style="display: none;">delete</button>
    </div>
    <div class="edit-spacer editMode" style="display: none;"></div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const $ = s => document.querySelector(s);
  const linkText = $('#linkText');
  const linkUrl = $('#linkUrl');
  const audioIn = $('#audioInput');
  const fileIn = $('#filenameInput');
  const linksSec = $('#linksSection');
  const container = $('.container');

  // Init audio field
  const srcEl = $('#pageAudio source');
  if (srcEl) audioIn.value = srcEl.src.split('/').pop();

  // ADD LINK (FIXED: separate link + delete button)
  $('#btnAddLink').onclick = () => {
    const text = linkText.value.trim();
    const url = linkUrl.value.trim();
    if (!text || !url) return alert('Fill both fields');

    const link = document.createElement('a');
    link.href = url;
    link.target = '_blank';
    link.textContent = text;
    link.style = 'font-size:85%; display:block; text-align:right;';

    const del = document.createElement('button');
    del.textContent = 'X';
    del.className = 'link-del editMode';
    del.style = 'margin-left:8px; font-size:0.7rem;';
    del.onclick = () => { link.remove(); del.remove(); };

    linksSec.appendChild(link);
    linksSec.appendChild(del);

    linkText.value = linkUrl.value = '';
    linkText.focus();
  };

  // RESTORE AUDIO (FIXED: only delete button has editMode)
  $('#btnRestoreAudio').onclick = () => {
    if ($('#audioWrapper')) return;
    const wrapper = document.createElement('div');
    wrapper.id = 'audioWrapper';
    wrapper.style.margin = '1.5rem 0';
    wrapper.innerHTML = `
      <div style="text-align:center; font-weight:600; margin-bottom:.3rem">
        Listen to the Podcast
        <button class="link-del editMode" style="font-size:.7rem; margin-left:8px;"
                onclick="this.parentElement.parentElement.remove()">Delete Audio</button>
      </div>
      <div style="text-align:center">
        <audio controls style="width:98%; margin:0 auto" id="pageAudio">
          <source src="" type="audio/mpeg">
        </audio>
      </div>
    `;
    document.querySelector('.sectionTop').insertAdjacentElement('afterend', wrapper);
    audioIn.value = '';
  };

  // ADD SECTION (FIXED: add editMode to delBtn and spacer)
  $('#btnAdd').onclick = () => {
    const clone = $('#sectionTemplate').cloneNode(true);
    clone.removeAttribute('id');
    clone.style.display = 'block';
    clone.className = 'section';
    clone.contentEditable = 'true';

    const delBtn = clone.querySelector('.delBtn');
    delBtn.classList.add('editMode');
    delBtn.onclick = () => clone.remove();

    container.appendChild(clone);

    const sp = document.createElement('div');
    sp.className = 'edit-spacer editMode';
    sp.contentEditable = 'false';
    container.appendChild(sp);
  };

  // SAVE (WORKS: hides only editMode, restores, saves clean)
$('#btnSave').onclick = () => {
  // 1. Update <title>
  const h2 = document.getElementById('articleTitle');
  const title = document.querySelector('title');
  if (h2 && title) title.textContent = h2.textContent.trim();

  // 2. Update audio
  const audioInput = audioIn.value.trim();
  const audioSource = document.querySelector('#pageAudio source');
  if (audioSource && audioInput) audioSource.src = audioInput;

  // 3. HIDE editMode elements
  const editElements = document.querySelectorAll('.editMode');
  editElements.forEach(el => el.style.display = 'none');

  // 4. DISABLE contenteditable
  const editableEls = document.querySelectorAll('[contenteditable]');
  const wasEditable = [];
  editableEls.forEach(el => {
    wasEditable.push(el);
    el.removeAttribute('contenteditable');
  });

  // 5. Capture clean HTML
  const cleanHTML = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;

  // 6. RESTORE contenteditable
  wasEditable.forEach(el => el.setAttribute('contenteditable', 'true'));

  // 7. RESTORE visibility
  editElements.forEach(el => el.style.display = 'block');

  // 8. Download
  const blob = new Blob([cleanHTML], { type: 'text/html' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = fileIn.value.trim() || 'podcast.html';
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);

  // 9. Alert and confirm save editable version
let saveEditableVersion = confirm("Saved to default download folder.\nSave an editable version?");

if (!saveEditableVersion) return;  // Exit function if Cancel

  // === 10. SAVE EDITABLE VERSION ===
const editHTML = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
const editBlob = new Blob([editHTML], { type: 'text/html' });
const editUrl = URL.createObjectURL(editBlob);
const editA = document.createElement('a');
const baseName = fileIn.value.trim() || 'podcast.html';
const editName = baseName.replace(/\.html$/, '') + 'EditMode.html';
editA.href = editUrl;
editA.download = editName;
document.body.appendChild(editA);
editA.click();
document.body.removeChild(editA);
URL.revokeObjectURL(editUrl);

};

  // Enter = Add Link
  linkText.onkeypress = linkUrl.onkeypress = e => {
    if (e.key === 'Enter') $('#btnAddLink').click();
  };
});
</script>


</body></html>