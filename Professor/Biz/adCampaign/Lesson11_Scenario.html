<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson11_Scenario</title>
    <style>
        body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }

        .student-info-container {
            padding: 10px;
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }

        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .save-container {
            padding: 10px;
        }

        .file-input-group {
            margin-bottom: 15px;
        }

        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }

        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
        }

        .lessonContent[contenteditable="true"] {
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
            padding: 15px;
        }

        .lesson-header {
           padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }

        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }

        .scenario-overview {
            background-color: #f5f5f5;
            border-top: 4px solid #FF9800;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        }

        .scenario-overview h2 {
            margin-top: 0;
            font-size: 18px;
            color: #2196F3;
        }

        .scenario-overview p {
            margin: 10px 0;
        }

        .participants {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }

        .participants strong {
            color: #333;
        }

        .dialogue-section {
            margin-top: 30px;
        }

        .dialogue-section h2 {
            font-size: 18px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .dialogue-line {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #2196F3;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
        }

        .speaker {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 3px;
        }

        .speech {
            margin-left: 20px;
            text-align: justify;
        }

        /* Highlighting styles */
        .idiom {
            color: #D84315;
        }

        .vocab-a2 {
            color: #1565C0;
        }

        .collocation {
            color: #7B1FA2;
        }



    </style>
</head>
<body>


   <div class="lessonContent" contenteditable="false">
    <div class="lesson-header">
        <h1>Lesson 11: Evaluating Alternative Celebrity Partners</h1>
        <p class="subtitle">Scenario 11: Weighing Options Between Jenny and Kashira</p>
    </div>

    <div class="scenario-overview">
        <h2>Scenario Overview</h2>
        <p>Kashira's representative, Jack, makes a conference call to Sarah and Sally about why Kashira would make a better choice than Jenny. He gives a few reasons. Sally and Sarah list two reasons why they still want Jenny, and Jack addresses those issues as well. They agree to get back to Jack as soon as possible. Sally and Sarah now have a discussion about the <span class="vocab-a2">ramifications</span> of choosing Kashira over Jenny, especially since they promised Jenny first choice, even though the one-month trial for Jenny has passed.</p>

        <div class="participants">
            <strong>Participants:</strong> Jack (Kashira's Representative), Sarah (Marketing Manager), Sally (Company President)
        </div>
    </div>

    <div class="dialogue-section">
        <h2>Dialogue</h2>

        <div class="dialogue-line">
            <div class="speaker">Jack:</div>
            <div class="speech">Hello, Sarah and Sally. Thank you for taking the call. I wanted to discuss why Kashira would make a better choice for endorsing your products compared to Jenny. First, Kashira has a <span class="collocation">global fan base</span> and a strong presence in multiple markets. Her appeal and reach would significantly boost your product's visibility and sales. Second, Kashira's energetic and charismatic personality aligns well with your <span class="collocation">brand's image</span>, creating a vibrant and engaging connection with consumers.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sarah:</div>
            <div class="speech">Thank you, Jack, for highlighting Kashira's strengths. While we recognize Kashira's impressive qualities, there are two specific reasons why we still believe Jenny is the ideal choice for our endorsement. First, Jenny's <span class="collocation">long-standing reputation</span> and influence in the beauty and entertainment industry <span class="idiom">resonate with</span> our target audience, particularly middle-aged women. Her endorsement would bring a sense of trust and <span class="vocab-a2">credibility</span> to our products. Second, Jenny's commitment to promoting healthy skin and embracing aging aligns perfectly with our <span class="collocation">brand's values</span>. She <span class="vocab-a2">embodies</span> the message we want to <span class="vocab-a2">convey</span> to our customers.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Jack:</div>
            <div class="speech">I understand your perspective, Sarah and Sally. However, I'd like to address your concerns. Kashira's <span class="vocab-a2">versatility</span> as an artist and her <span class="vocab-a2">dedicated</span> efforts in empowering women make her relatable to a wide range of <span class="vocab-a2">demographics</span>, including your target market of middle-aged women. She can effectively convey the message of embracing beauty at any age. Moreover, Kashira's <span class="collocation">international appeal</span> allows her to connect with diverse audiences, potentially expanding your product's reach beyond borders.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">Thank you, Jack, for providing your insights on Kashira's strengths. We will carefully consider your points and <span class="idiom">get back to you</span> as soon as possible with our <span class="collocation">final decision</span>. However, I must <span class="vocab-a2">acknowledge</span> that choosing Kashira over Jenny may have some <span class="vocab-a2">ramifications</span>, given that we promised Jenny the first choice. Although the <span class="collocation">one-month trial period</span> has passed, we want to handle this situation with <span class="vocab-a2">integrity</span> and <span class="vocab-a2">transparency</span>.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sarah:</div>
            <div class="speech">I completely agree, Sally. We must honor our commitment to Jenny and handle this situation professionally. It's important for us to communicate with Jenny openly and honestly, explaining the circumstances and the reasons behind our decision. We can express our appreciation for her interest and assure her that we genuinely value our partnership.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">Absolutely, Sarah. Maintaining a positive and <span class="collocation">respectful relationship</span> with Jenny is <span class="vocab-a2">crucial</span>, regardless of our <span class="collocation">final decision</span>. We will reach out to Jenny and have an honest conversation about the current situation, expressing our gratitude and understanding for her involvement in the process.</div>
        </div>
    </div>
</div>


    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson06_Scenario6.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>


</body></html>
