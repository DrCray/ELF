<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson01_Scenario1</title>
    <style>
       body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }


        .student-info-container {
            padding: 10px;
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }

        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .save-container {
            padding: 10px;
        }

        .file-input-group {
            margin-bottom: 15px;
        }

        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }

        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
        }


        .lesson-header {
           padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }

        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }

        .scenario-overview {
            background-color: #f5f5f5;
            border-top: 4px solid orange;
            border-radius: 6px;
            -webkit-box-shadow: 0px 0px 12px 3px gray;
            box-shadow: 0px 0px 12px 3px gray;
            padding: 15px;
            margin-bottom: 25px;
        }

        .scenario-overview h2 {
            margin-top: 0;
            font-size: 18px;
            color: #2196F3;
        }

        .scenario-overview p {
            margin: 10px 0;
        }

        .participants {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }

        .participants strong {
            color: #333;
        }

        .dialogue-section {
            margin-top: 30px;
        }

        .dialogue-section h2 {
            font-size: 18px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .dialogue-line {
            padding:.4rem;
            margin-bottom: 1.3rem;
            background-color: #f5f5f5;
            border-left: 4px solid #2196F3;
            border-radius: 6px;
            -webkit-box-shadow: 3px 3px 12px 3px gray;
            box-shadow: 3px 3px 12px 3px gray;
        }

        .speaker {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 3px;
        }

        .speech {
            margin-left: 20px;
            text-align: justify;
        }

        /* Highlighting styles */
        .idiom {
            color: #D84315;
        }

        .vocab-a2 {
            color: #1565C0;
        }


    </style>
</head>
<body>
    <div class="lessonContent" contenteditable="false">
        <div class="lesson-header">
            <h1>Lesson 1: Marketing Strategy Meeting</h1>
            <p class="subtitle">Scenario 1: Product Launch Brainstorming Session</p>
        </div>
        

        
        <div class="scenario-overview">
            <h2>Scenario Overview</h2>
            <p>The marketing team at Beautiful Years cosmetics company meets to discuss promotional strategies for their new product line, Just4you, which targets middle-aged women. The team explores various marketing approaches including influencer partnerships, celebrity events, personalized consultations, and social media campaigns. They emphasize the importance of building customer relationships, creating brand ambassadors, and maintaining patience throughout the marketing process.</p>
            
            <div class="participants">
                <strong>Participants:</strong> Mark Stratem (Product Leader), Leila Simpson (Packaging Designer), Bert Thomas (R&amp;D), Tina Tarter (Product Distribution)
            </div>
        </div>
        
        <div class="dialogue-section">
            <h2>Dialogue</h2>
            
            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech">Good morning, everyone! Let's get started with our meeting to <span class="vocab-a2">discuss</span> the <span class="vocab-a2">promotion</span> of our new line of <span class="vocab-a2">cosmetics</span> targeted to middle-aged women. Any ideas on how to <span class="vocab-a2">effectively</span> market our products?</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Leila:</div>
                <div class="speech">Morning! I think we should <span class="idiom">go the extra mile</span> to make our cosmetics <span class="vocab-a2">stand out</span> from the <span class="vocab-a2">competition</span>. How about offering <span class="vocab-a2">personalized</span> beauty <span class="vocab-a2">consultations</span> for our customers?</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Bert:</div>
                <div class="speech">That's a great idea! We could also tap into <span class="vocab-a2">influencer</span> marketing. Finding popular beauty bloggers who are well-respected in the <span class="vocab-a2">industry</span> and getting them to <span class="vocab-a2">endorse</span> our products could give us <span class="idiom">a leg up</span>.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">I totally agree. We need to <span class="idiom">think outside the box</span> and come up with <span class="vocab-a2">innovative</span> <span class="vocab-a2">campaigns</span>. What if we <span class="vocab-a2">organize</span> a beauty event and invite local <span class="vocab-a2">celebrities</span> to <span class="vocab-a2">showcase</span> our cosmetics?</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech">Excellent suggestion! It's important to <span class="idiom">make a big splash</span> in the market. We could also <span class="idiom">sweeten the deal</span> by offering <span class="vocab-a2">exclusive</span> discounts or limited-edition gift sets to create a <span class="vocab-a2">buzz</span> and drive sales.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Leila:</div>
                <div class="speech">Absolutely! Let's not forget the power of <span class="vocab-a2">word-of-mouth</span> marketing. We should <span class="vocab-a2">encourage</span> our satisfied customers to <span class="vocab-a2">spread the word</span> and be our brand <span class="vocab-a2">ambassadors</span>.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Bert:</div>
                <div class="speech">Yes, and we can't <span class="vocab-a2">underestimate</span> the value of building strong relationships with our customers. We should focus on providing top-notch customer service, <span class="idiom">going the extra mile</span> to ensure their <span class="vocab-a2">satisfaction</span>.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">I couldn't agree more. We need to build trust and <span class="vocab-a2">establish</span> ourselves as a go-to brand in the market. Perhaps we could <span class="vocab-a2">leverage</span> social media platforms and encourage user-generated content, like before-and-after photos or <span class="vocab-a2">testimonials</span>.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech">Great idea! We can <span class="idiom">kill two birds with one stone</span> by running social media <span class="vocab-a2">contests</span> where customers can win our products by sharing their experiences using our cosmetics.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Leila:</div>
                <div class="speech">That's a brilliant suggestion! It's important to remember that <span class="idiom">Rome wasn't built in a day</span>. We should be patient and <span class="vocab-a2">persistent</span> in our marketing efforts, knowing that success will come with time.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Bert:</div>
                <div class="speech">Absolutely. We need to <span class="idiom">keep our eyes on the prize</span> and not let any setbacks <span class="vocab-a2">discourage</span> us. In the end, our hard work will <span class="idiom">pay off</span>.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">I couldn't agree more. Together, we can make our new line of cosmetics a <span class="idiom">roaring success</span>. Let's <span class="idiom">put our heads together</span> and make it happen!</div>
            </div>
        </div>
    </div>

    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson01_Scenario1.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>


</body></html>