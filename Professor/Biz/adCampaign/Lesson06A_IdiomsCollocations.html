<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson06A_IdiomsCollocations</title>
    <style>
        body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        .student-info-container {
            padding: 10px;
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }
        
        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .save-container {
            padding: 10px;
        }
        
        .file-input-group {
            margin-bottom: 15px;
        }
        
        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }
        
        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
        }
        
        .lessonContent[contenteditable="true"] {
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
            padding: 15px;
        }
        
        .lesson-header {
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }
        
        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }
        
        .intro {
            background-color: #f5f5f5;
            border-top: 4px solid #FF9800;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        }
        
        .intro p {
            margin: 5px 0;
        }
        
        .idiomsAll {
            margin-bottom: 30px;
        }
        
        .collocationsAll {
            margin-bottom: 30px;
        }
        
        .idiomsAll h2,
        .collocationsAll h2 {
            font-size: 20px;
            color: #7D5656;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #D84315;
        }
        
        .idiom-entry {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .idiom-entry:last-child {
            border-bottom: none;
        }
        
        .collocation-entry {
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .collocation-entry:last-child {
            border-bottom: none;
        }
        
        .idiom-title {
            font-size: 18px;
            font-weight: bold;
            color: #D84315;
            margin-bottom: 8px;
        }
        
        .collocation-title {
            font-size: 18px;
            font-weight: bold;
            color: #7B1FA2;
            margin-bottom: 8px;
        }
        
        .definition {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .definition-label {
            font-weight: bold;
            color: #555;
        }
        
        .definition-text {
            color: #333;
        }
        
        .example {
            margin-left: 20px;
            font-style: italic;
            color: #444;
        }
        
        .example-label {
            font-weight: bold;
            color: #555;
            font-style: normal;
        }
        
        .idiom-highlight {
            color: #D84315;
            font-weight: 500;
        }

        .collocation-highlight{
            color: #7B1FA2;
            font-weight: 500;
        }
.idiomsAll {
    counter-reset: idiomsCount;
}

.idiom-entry {
    counter-increment: idiomsCount;
}
.idiom-title::before {
    content: counter(idiomsCount) ". ";
    font-weight: 600;
    margin-right: 0.25em;
}

.collocationsAll {
    counter-reset: collocationCount;
}

.collocation-entry {
    counter-increment: collocationCount;
}
.collocation-title::before {
    content: counter(collocationCount) ". ";
    font-weight: 600;
    margin-right: 0.25em;
}
    </style>
</head>
<body>
    <div class="lessonContent" contenteditable="false">
        <div class="lesson-header">
            <h1>Lesson 6A: Idioms and Collocations</h1>
            <p class="subtitle">Common Business Idioms and Collocations from Scenario 6</p>
        </div>
        
        <div class="intro">
            <p>This lesson covers common idioms and several important collocations used in business contexts. Collocations are words that commonly go together in natural English. Each expression is defined and illustrated with an example sentence.</p>
        </div>
        
        <div class="idiomsAll">
            <h2>Idioms</h2>
        
            <div class="idiom-entry">
                <div class="idiom-title">Takes charge of</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">To assume responsibility for something; to take control or leadership of a situation or project.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> The senior manager will <span class="idiom-highlight">take charge of</span> the restructuring process.
                </div>
            </div>
            
            <div class="idiom-entry">
                <div class="idiom-title">Moving on to</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">To proceed to the next topic or subject; to transition to another matter.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> Now <span class="idiom-highlight">moving on to</span> the quarterly results, I'm pleased to report strong growth.
                </div>
            </div>
            
            <div class="idiom-entry">
                <div class="idiom-title">Done our homework</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">To have researched and prepared thoroughly; to have gathered necessary information beforehand.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> Before the meeting, we <span class="idiom-highlight">did our homework</span> and analyzed all the competitor data.
                </div>
            </div>
            
            <div class="idiom-entry">
                <div class="idiom-title">Go a long way</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">To have a significant positive effect; to be very helpful in achieving something.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> A simple thank you note can <span class="idiom-highlight">go a long way</span> in building client relationships.
                </div>
            </div>
            
        </div>
        
        <div class="collocationsAll">
            <h2>Collocations</h2>
        
            <div class="collocation-entry">
                <div class="collocation-title">Large-scale campaigns</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">Major marketing or promotional efforts that reach a wide audience; extensive organized activities.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> The agency specializes in <span class="collocation-highlight">large-scale campaigns</span> for international brands.
                </div>
            </div>
            
            <div class="collocation-entry">
                <div class="collocation-title">Uncharted territory</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">A situation or area that has not been experienced or explored before; new and unfamiliar ground.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> Entering the Asian market is <span class="collocation-highlight">uncharted territory</span> for our company.
                </div>
            </div>
            
            <div class="collocation-entry">
                <div class="collocation-title">Contract negotiations</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">Discussions and bargaining to reach an agreement on the terms of a contract.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> The <span class="collocation-highlight">contract negotiations</span> took several weeks but resulted in favorable terms.
                </div>
            </div>
            
            <div class="collocation-entry">
                <div class="collocation-title">Talent agency</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">A company that represents and finds work for actors, musicians, athletes, and other performers.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> The <span class="collocation-highlight">talent agency</span> represents some of Hollywood's biggest stars.
                </div>
            </div>
            
            <div class="collocation-entry">
                <div class="collocation-title">Mutually beneficial</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">Advantageous to all parties involved; creating benefits for everyone.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> The partnership proved to be <span class="collocation-highlight">mutually beneficial</span> for both companies.
                </div>
            </div>
            
            <div class="collocation-entry">
                <div class="collocation-title">Common ground</div>
                <div class="definition">
                    <span class="definition-label">Definition:</span> 
                    <span class="definition-text">Shared interests, beliefs, or opinions that can form the basis for agreement.</span>
                </div>
                <div class="example">
                    <span class="example-label">Example:</span> Despite initial differences, the negotiators found <span class="collocation-highlight">common ground</span> on pricing.
                </div>
            </div>
        </div>
    </div>

    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson06A_IdiomsCollocations.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>







<style>
        footer {margin-top:8rem;}
</style>
        <footer>...</footer>

<script>
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('.idiom-entry, .collocation-entry').forEach(entry => {


    if (entry.querySelector('details')) return;

const title = entry.querySelector('.idiom-title, .collocation-title');
    if (!title) return;

    const details = document.createElement('details');
    const summary = document.createElement('summary');
details.classList.add('study-item');
//details.open = true;


    summary.appendChild(title);
    details.appendChild(summary);

    Array.from(entry.children).forEach(child => {
      if (child !== title) {
        details.appendChild(child);
      }
    });

    entry.innerHTML = '';
    entry.appendChild(details);

    /* ---- STYLE FIXES (bulk, no file edits needed) ---- */

    title.style.display = 'inline';

    const definition = details.querySelector('.definition');
    if (definition) {
      definition.style.marginTop = '1rem';
    }
  });



//add Study Mode Toggle button and function
const intro = document.querySelector('.intro');
if (intro) {
  const button = document.createElement('button');
  button.textContent = 'Study Mode';
  button.style.marginBottom=".8rem";
  button.style.background="blue";
  button.style.color="white";
  button.style.fontWeight="bold";

  intro.insertAdjacentElement('afterend', button);

  button.addEventListener('click', () => {
    const detailsList = document.querySelectorAll('details.study-item');
    const openAll = button.textContent === 'Study Mode';

    detailsList.forEach(d => {
      d.open = openAll;
    });

    button.textContent = openAll ? 'Hide All' : 'Study Mode';
  });
}




});
</script>

</body></html>
