<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson013Scenario</title>
    <style>
        body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }

        .student-info-container {
            padding: 10px;
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }

        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .save-container {
            padding: 10px;
        }

        .file-input-group {
            margin-bottom: 15px;
        }

        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }

        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
        }

        .lessonContent[contenteditable="true"] {
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
            padding: 15px;
        }

        .lesson-header {
           padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }

        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }

        .scenario-overview {
            background-color: #f5f5f5;
            border-top: 4px solid #FF9800;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        }

        .scenario-overview h2 {
            margin-top: 0;
            font-size: 18px;
            color: #2196F3;
        }

        .scenario-overview p {
            margin: 10px 0;
        }

        .participants {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }

        .participants strong {
            color: #333;
        }

        .dialogue-section {
            margin-top: 30px;
        }

        .dialogue-section h2 {
            font-size: 18px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .dialogue-line {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #2196F3;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
        }

        .speaker {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 3px;
        }

        .speech {
            margin-left: 20px;
            text-align: justify;
        }

        /* Highlighting styles */
        .idiom {
            color: #D84315;
        }

        .vocab-a2 {
            color: #1565C0;
        }

        .collocation {
            color: #7B1FA2;
        }



    </style>
</head>
<body>


<div class="lessonContent" contenteditable="false">
    <div class="lesson-header">
        <h1>Lesson 13: Finalizing Joint Endorsement Agreement</h1>
        <p class="subtitle">Scenario 13: Negotiating the Dual Celebrity Partnership</p>
    </div>

    <div class="scenario-overview">
        <h2>Scenario Overview</h2>
        <p>Charles calls Sally and Sarah and offers up the possibility of a <span class="collocation">joint endorsement</span> for both Kashira and Jenny. Sally and Sarah are quite surprised, express a bit of shock, but then decide that it would be <span class="vocab-a2">phenomenal</span>. However, they express to Charles their concerns over having two celebrities working together, because sometimes celebrity personalities will clash. Charles reminds them that they've worked together before. They discuss the <span class="vocab-a2">viability</span> of scheduling them both to make commercials together, given their <span class="collocation">busy performance schedules</span>. Eventually they agree it will work out, but Sally tells Charles that the percentage will be cut down in order to be able to pay both celebrities. Charles says it's not about the money, they're both <span class="idiom">pretty well off</span>, they just want to work together on something fun and meaningful, they both enjoy the products. Then it's settled. Charles explains that he's <span class="idiom">taken lead</span> in this deal, he and Jack thought that would be more practical. So Sarah and Sally agree to deliver both contracts to Charles for their signatures.</p>

        <div class="participants">
            <strong>Participants:</strong> Charles (Representatives for Jenny and Kashira), Sarah (Marketing Manager), Sally (Company President)
        </div>
    </div>

    <div class="dialogue-section">
        <h2>Dialogue</h2>

        <div class="dialogue-line">
            <div class="speaker">Charles:</div>
            <div class="speech">Hello, Sally and Sarah. I have an exciting proposition for you. What if we consider a <span class="collocation">joint endorsement</span> for both Kashira and Jenny? I've discussed it with Jack, and we believe it could be a <span class="vocab-a2">phenomenal</span> collaboration.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">Charles, that's quite surprising! A <span class="collocation">joint endorsement</span> with both Kashira and Jenny would be incredible. The <span class="collocation">combined star power</span> and their <span class="collocation">shared admiration</span> for the Just4you products could create a <span class="collocation">significant impact</span>. We didn't expect this, but it's definitely an opportunity worth exploring.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sarah:</div>
            <div class="speech">I agree, Sally. It's unexpected, but it has <span class="vocab-a2">immense</span> potential. However, we should address the concerns that come with having two celebrities working together. Sometimes, personalities can clash, and we want to ensure a <span class="collocation">smooth collaboration</span>.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Charles:</div>
            <div class="speech">I understand your concerns, but <span class="idiom">let's not forget</span> that Kashira and Jenny have worked together before, such as during the Super Bowl performance. They have already established a <span class="collocation">positive working relationship</span>, and their chemistry was <span class="vocab-a2">evident</span>. I believe they can <span class="vocab-a2">navigate</span> any challenges and <span class="idiom">bring out the best in</span> each other.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">You make a valid point, Charles. Their <span class="collocation">previous collaboration</span> shows that they can work together successfully. Now, let's discuss the logistics. Given their <span class="collocation">busy performance schedules</span>, we need to consider the <span class="vocab-a2">feasibility</span> of scheduling them both for commercials or <span class="collocation">joint appearances</span>. It might require careful <span class="vocab-a2">coordination</span>, but it's definitely worth exploring.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Charles:</div>
            <div class="speech">Absolutely, Sally. I will work closely with their teams to ensure a <span class="collocation">workable schedule</span> that <span class="vocab-a2">accommodates</span> their commitments. It might require some flexibility, but I'm confident we can make it happen.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">Good to hear, Charles. We also need to consider the <span class="collocation">financial aspect</span> since we're involving two celebrities. To accommodate this, we will have to adjust the <span class="collocation">percentage fee</span> accordingly to ensure we can <span class="vocab-a2">adequately</span> compensate both Kashira and Jenny.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Charles:</div>
            <div class="speech">Sally, Sarah, it's not about the money for them. Both Kashira and Jenny are financially <span class="idiom">well-off</span>. They are genuinely interested in working together on something fun and meaningful. Their passion for the products and the opportunity to collaborate drives their motivation.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Sally:</div>
            <div class="speech">That's great to hear, Charles. In that case, we will proceed with adjusting the <span class="collocation">percentage fee</span> while ensuring a <span class="collocation">fair compensation structure</span> for everyone involved. We will prepare both contracts and send them over to you for your <span class="collocation">final approval</span>, and Kashira and Jenny's signatures. Let's make this <span class="collocation">joint endorsement</span> a reality.</div>
        </div>
    </div>
</div>


    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson06_Scenario6.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>


</body></html>