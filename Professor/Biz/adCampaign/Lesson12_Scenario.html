<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson12_Scenario</title>
    <style>
        body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }

        .student-info-container {
            padding: 10px;
        }

        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }

        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }

        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }

        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }

        .save-container {
            padding: 10px;
        }

        .file-input-group {
            margin-bottom: 15px;
        }

        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }

        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
        }

        .lessonContent[contenteditable="true"] {
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
            padding: 15px;
        }

        .lesson-header {
           padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }

        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }

        .scenario-overview {
            background-color: #f5f5f5;
            border-top: 4px solid #FF9800;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        }

        .scenario-overview h2 {
            margin-top: 0;
            font-size: 18px;
            color: #2196F3;
        }

        .scenario-overview p {
            margin: 10px 0;
        }

        .participants {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }

        .participants strong {
            color: #333;
        }

        .dialogue-section {
            margin-top: 30px;
        }

        .dialogue-section h2 {
            font-size: 18px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }

        .dialogue-line {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #2196F3;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
        }

        .speaker {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 3px;
        }

        .speech {
            margin-left: 20px;
            text-align: justify;
        }

        /* Highlighting styles */
        .idiom {
            color: #D84315;
        }

        .vocab-a2 {
            color: #1565C0;
        }

        .collocation {
            color: #7B1FA2;
        }



    </style>
</head>
<body>


  <div class="lessonContent" contenteditable="false">
    <div class="lesson-header">
        <h1>Lesson 12: Celebrity Collaboration Discussion</h1>
        <p class="subtitle">Scenario 12: Kashira and Jenny Explore Joint Endorsement</p>
    </div>

    <div class="scenario-overview">
        <h2>Scenario Overview</h2>
        <p>Kashira calls Jenny Rodrigez. They exchange admiration one for the other and talk about the Super Bowl performance they did together. They talk about how well it was received and laugh over a particular funny incident. Kashira asks about how Jenny feels about the Just4you line of products from "Beautiful Years". They both express that it <span class="idiom">lives up to its hype</span>. They begin to question whether or not they could have a <span class="collocation">joint endorsement</span> of the product, since they like working together anyway.</p>

        <div class="participants">
            <strong>Participants:</strong> Kashira (Global Superstar), Jenny Rodrigez (Global Superstar)
        </div>
    </div>

    <div class="dialogue-section">
        <h2>Dialogue</h2>

        <div class="dialogue-line">
            <div class="speaker">Kashira:</div>
            <div class="speech">Hey Jenny, it's so great to hear your voice! I've been wanting to <span class="idiom">catch up with</span> you. I must say, your recent performances have been <span class="vocab-a2">phenomenal</span>. Remember the <span class="collocation">Super Bowl halftime show</span> we did together? It was such an incredible experience!</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Jenny:</div>
            <div class="speech">Oh Kashira, it's always a pleasure to talk to you. Yes, the Super Bowl performance was unforgettable! The energy, the music, and the <span class="collocation">positive reception</span> from the audienceâ€”it was truly a <span class="collocation">career highlight</span> for both of us. And do you remember that funny incident with the microphone stand? We couldn't help but laugh!</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Kashira:</div>
            <div class="speech">Haha, yes! That was hilarious. Good times! But hey, let's talk about something else. How do you feel about the Just4you products? I've been using them for a while now, and I must say, they <span class="idiom">live up to the hype</span>. My skin feels incredible!</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Jenny:</div>
            <div class="speech">I couldn't agree more, Kashira. I've been incorporating the Just4you products into my <span class="collocation">skincare routine</span> as well, and the results have been amazing. It's refreshing to find a line that genuinely cares about the health of our skin. Beautiful Years has done a fantastic job with the <span class="vocab-a2">formulations</span>.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Kashira:</div>
            <div class="speech">You're absolutely right, Jenny. It's <span class="vocab-a2">evident</span> that they prioritize quality and effectiveness. You know, I was thinking, since we enjoy working together so much, and we both genuinely believe in the Just4you products, what if we explore the possibility of a <span class="collocation">joint endorsement</span>? We could bring our <span class="collocation">collective influence</span> and create a <span class="collocation">powerful impact</span> in promoting the products.</div>
        </div>

        <div class="dialogue-line">
            <div class="speaker">Jenny:</div>
            <div class="speech">That's a fantastic idea, Kashira! We have great chemistry, and our collaboration would <span class="vocab-a2">undoubtedly</span> <span class="idiom">resonate with</span> our fans and the <span class="collocation">target audience</span>. It's an exciting opportunity to combine our strengths and support a product we genuinely love. Let's discuss this further with Sally and Sarah. They might be open to exploring a <span class="collocation">joint endorsement</span> with us.</div>
        </div>
    </div>
</div>


    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson06_Scenario6.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>


</body></html>