<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson07_Scenario7</title>
    <style>
        body {
            max-width: 600px;
            margin: auto;
            padding: 0 15px;
            font-family: Arial, sans-serif;
            line-height: 1.6;
        }
        
        .student-info-container {
            padding: 10px;
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 10px;
            font-size: 16px;
        }
        
        .pdf-button {
            padding: 10px 10px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .pdf-button:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .note {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        
        .save-container {
            padding: 10px;
        }
        
        .file-input-group {
            margin-bottom: 15px;
        }
        
        .file-input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .file-input-group input {
            width: 100%;
            max-width: 300px;
            padding: 10px;
            font-size: 16px;
        }
        
        /* Lesson Content Styles */
        .lessonContent {
            padding: 20px 10px;
        }
        
        .lessonContent[contenteditable="true"] {
            border: 2px dashed #4CAF50;
            background-color: #f9fff9;
            padding: 15px;
        }
        
        .lesson-header {
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .lesson-header h1 {
            margin: 0 0 5px 0;
            font-size: 24px;
            color: #333;
        }
        
        .lesson-header .subtitle {
            color: #666;
            font-style: italic;
            font-size: 14px;
        }
        
        .scenario-overview {
            background-color: #f5f5f5;
            border-top: 4px solid #FF9800;
            padding: 15px;
            margin-bottom: 25px;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.15);
        }
        
        .scenario-overview h2 {
            margin-top: 0;
            font-size: 18px;
            color: #2196F3;
        }
        
        .scenario-overview p {
            margin: 10px 0;
        }
        
        .participants {
            font-size: 14px;
            color: #555;
            margin-top: 10px;
        }
        
        .participants strong {
            color: #333;
        }
        
        .dialogue-section {
            margin-top: 30px;
        }
        
        .dialogue-section h2 {
            font-size: 18px;
            color: #333;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        
        .dialogue-line {
            margin-bottom: 15px;
            padding: 12px;
            border-radius: 6px;
            border-left: 4px solid #2196F3;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.15);
        }
        
        .speaker {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 3px;
        }
        
        .speech {
            margin-left: 20px;
            text-align: justify;
        }
        
        /* Highlighting styles */
        .idiom {
            color: #D84315;
        }
        
        .vocab-a2 {
            color: #1565C0;
        }
        
        .collocation {
            color: #7B1FA2;
        }
    </style>
</head>
<body>
    <div class="lessonContent" contenteditable="false">
        <div class="lesson-header">
            <h1>Lesson 7: Ethical Business Practices Discussion</h1>
            <p class="subtitle">Scenario 7: Preparing for Ethical Standards Meeting</p>
        </div>
        
        <div class="scenario-overview">
            <h2>Scenario Overview</h2>
            <p>Jenny Rodrigez's representative, Charles, has contacted the company to discuss ethical concerns including child labor, environmental practices, and animal testing. The team prepares their response strategy, emphasizing their commitment to ethical business practices. They plan to present documentation on their strict policies against child labor, showcase environmental sustainability initiatives, highlight cruelty-free certifications and alternative testing methods, and demonstrate transparent communication. The team also proposes joint charitable initiatives and expresses willingness to make necessary adjustments to align with Jenny's values, aiming to build a strong partnership foundation.</p>
            
            <div class="participants">
                <strong>Participants:</strong> Mark Stratem (Product Leader), Leila Simpson (Packaging Designer), Bert Thomas (R&amp;D), Tina Tarter (Product Distribution)
            </div>
        </div>
        
        <div class="dialogue-section">
            <h2>Dialogue</h2>

            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech"> Charles, has contacted us and asked us to meet with him and address the following issues: child labor, the environment, and animal testing. These things are not acceptable to Jenny.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">That's a <span class="vocab-a2">crucial</span> update. It's great that Jenny Rodrigez's representative, Charles, has reached out to us. We need to approach this meeting with <span class="vocab-a2">utmost</span> importance and address the concerns raised regarding child labor, the environment, and animal testing. Let's discuss how we can respond and <span class="vocab-a2">assure</span> Charles that we share Jenny's values.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Leila:</div>
                <div class="speech"><span class="idiom">First and foremost</span>, we need to emphasize our company's commitment to <span class="collocation">ethical business practices</span>. We should prepare a presentation that outlines our <span class="collocation">strict policies</span> against child labor and ensures that our <span class="collocation">supply chain</span> is free from such practices. Demonstrating our <span class="vocab-a2">compliance</span> with international labor standards will be essential to gain Jenny's trust.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Bert:</div>
                <div class="speech">Absolutely. Additionally, we should highlight our <span class="vocab-a2">dedication</span> to <span class="collocation">environmental sustainability</span>. We can showcase our efforts in reducing <span class="collocation">carbon footprint</span>, waste management, and responsible sourcing of ingredients. By emphasizing our <span class="vocab-a2">eco-friendly</span> <span class="vocab-a2">initiatives</span>, we can assure Jenny and Charles that we align with their concerns for the environment.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">In addressing the issue of animal testing, we should emphasize our commitment to cruelty-free practices. We can showcase our <span class="vocab-a2">certifications</span> from reputable organizations that <span class="vocab-a2">validate</span> our stance against animal testing. Furthermore, we can highlight our use of <span class="vocab-a2">alternative</span> testing methods, such as <span class="vocab-a2">in vitro</span> testing and computer modeling.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech">It's important to <span class="vocab-a2">convey</span> our company's values and efforts in these areas transparently. We can provide documentation, reports, and <span class="vocab-a2">testimonials</span> from third-party auditors or organizations that <span class="vocab-a2">endorse</span> our responsible business practices. This will provide Charles with <span class="collocation">tangible evidence</span> of our commitment.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Leila:</div>
                <div class="speech">During the meeting, it's crucial that we actively listen to Charles's concerns and genuinely express our desire to address them. We should be open to suggestions and discuss how we can <span class="vocab-a2">collaborate</span> with Jenny and her team to further promote ethical practices in the beauty industry.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Bert:</div>
                <div class="speech">As a <span class="idiom">token of our sincerity</span>, we can propose <span class="collocation">joint initiatives</span> or <span class="collocation">charitable partnerships</span> that focus on supporting causes related to <span class="collocation">child welfare</span>, <span class="collocation">environmental conservation</span>, and <span class="collocation">animal rights</span>. By demonstrating our shared commitment to these issues, we can build a stronger foundation for collaboration.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Tina:</div>
                <div class="speech">Ultimately, our goal should be to <span class="vocab-a2">reassure</span> Charles that we not only <span class="vocab-a2">acknowledge</span> these concerns but are actively working to improve our practices. We should be prepared to make necessary changes or <span class="vocab-a2">adjustments</span> to ensure that our products and operations align with Jenny's values.</div>
            </div>
            
            <div class="dialogue-line">
                <div class="speaker">Mark:</div>
                <div class="speech">Let's approach this meeting with a genuine desire to address these issues and find common ground. By actively engaging in <span class="collocation">constructive dialogue</span> and demonstrating our dedication to responsible business practices, we can hopefully forge a strong partnership with Jenny Rodrigez, while making a positive impact in the areas she deeply cares about.</div>
            </div>
        </div>
    </div>

    <div class="student-info-container">
        <div class="input-group">
            <input type="text" id="studentName" value="Name" maxlength="25">
            <input type="text" id="studentID" value="ID" maxlength="25">
        </div>
        
        <button id="pdfButton" class="pdf-button" disabled="">Print/Save as PDF</button>
        
        <p class="note">Name and ID required for PDF print.</p>
    </div>
    
    <div class="save-container">
        <div class="file-input-group editMode" style="display: none;">
            <label for="fileName">File Name</label>
            <input type="text" id="fileName" class="editMode" value="Lesson07_Scenario7.html" style="display: none;">
        </div>
        
        <button id="saveButton" class="editMode" style="display: none;">Save as Local File</button>
    </div>

    <script>
        // Initialize save functionality on page load
        document.addEventListener('DOMContentLoaded', function() {
            const saveButton = document.getElementById('saveButton');
            const fileNameInput = document.getElementById('fileName');
            
            saveButton.addEventListener('click', function() {
                saveFiles();
            });
            
            function saveFiles() {
                // Get the filename without .html extension
                let fileName = fileNameInput.value.trim();
                if (fileName.endsWith('.html')) {
                    fileName = fileName.slice(0, -5);
                }
                
                // UPDATE TITLE TO MATCH FILENAME
                document.title = fileName;                
                
                // FIRST SAVE: Current editable state
                const editableHTML = getFullHTML();
                downloadFile(editableHTML, fileName + 'EditMode.html');
                
                // Store current states
                const editableElements = document.querySelectorAll('[contenteditable="true"]');
                const editModeElements = document.querySelectorAll('.editMode');
                
                // DISABLE EDITING: Set contenteditable to false
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'false');
                });
                
                // HIDE EDIT MODE: Set editMode class to display:none
                editModeElements.forEach(el => {
                    el.style.display = 'none';
                });
                
                // SECOND SAVE: Clean public version
                const publicHTML = getFullHTML();
                downloadFile(publicHTML, fileName + '.html');
                
                // RESTORE EDITING: Set contenteditable back to true
                editableElements.forEach(el => {
                    el.setAttribute('contenteditable', 'true');
                });
                
                // RESTORE EDIT MODE: Set editMode class back to display:block
                editModeElements.forEach(el => {
                    el.style.display = 'block';
                });
            }
            
            function getFullHTML() {
                // Get the complete HTML including DOCTYPE
                const doctype = '<!DOCTYPE html>\n';
                const html = document.documentElement.outerHTML;
                return doctype + html;
            }
            
            function downloadFile(content, filename) {
                // Create blob from content
                const blob = new Blob([content], { type: 'text/html' });
                
                // Create download link
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                a.download = filename;
                
                // Trigger download
                document.body.appendChild(a);
                a.click();
                
                // Cleanup
                document.body.removeChild(a);
                URL.revokeObjectURL(a.href);
            }
        });
    </script>

    <script>
        const nameInput = document.getElementById('studentName');
        const idInput = document.getElementById('studentID');
        const pdfButton = document.getElementById('pdfButton');
        
        const DEFAULTS = {
            name: 'Name',
            id: 'ID'
        };
        
        // Sanitize input to prevent injection
        function sanitizeInput(input) {
            const temp = document.createElement('div');
            temp.textContent = input;
            return temp.innerHTML;
        }
        
        // Validate input length and content
        function validateInput(input, fieldName) {
            const sanitized = sanitizeInput(input.trim());
            
            if (sanitized.length < 2) {
                alert(`${fieldName} must be at least 2 characters long.`);
                return false;
            }
            
            if (sanitized.length > 25) {
                alert(`${fieldName} must be no more than 25 characters long.`);
                return false;
            }
            
            return true;
        }
        
        // Check if both fields are valid and changed from defaults
        function checkEnablePDF() {
            const nameValue = nameInput.value.trim();
            const idValue = idInput.value.trim();
            
            // Check if changed from defaults
            const nameChanged = nameValue !== DEFAULTS.name;
            const idChanged = idValue !== DEFAULTS.id;
            
            // Check if valid
            const nameValid = nameValue.length >= 2 && nameValue.length <= 25;
            const idValid = idValue.length >= 2 && idValue.length <= 25;
            
            // Enable button only if both changed AND both valid
            pdfButton.disabled = !(nameChanged && idChanged && nameValid && idValid);
        }
        
        // Validate on blur (when user leaves field)
        nameInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.name && value.length > 0) {
                if (validateInput(value, 'Name')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.name;
                }
            }
            checkEnablePDF();
        });
        
        idInput.addEventListener('blur', function() {
            const value = this.value.trim();
            if (value !== DEFAULTS.id && value.length > 0) {
                if (validateInput(value, 'ID')) {
                    this.value = sanitizeInput(value);
                } else {
                    this.value = DEFAULTS.id;
                }
            }
            checkEnablePDF();
        });
        
        // Also check on input to provide immediate feedback for enabling button
        nameInput.addEventListener('input', checkEnablePDF);
        idInput.addEventListener('input', checkEnablePDF);
        
        // Clear default on focus
        nameInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.name) {
                this.value = '';
            }
        });
        
        idInput.addEventListener('focus', function() {
            if (this.value === DEFAULTS.id) {
                this.value = '';
            }
        });
        
        // PDF Print functionality
        pdfButton.addEventListener('click', function() {
            window.print();
        });
    </script>


</body></html>
